<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Instalacion - Documentación</title><meta name="Description" content="Guia de instalacion"><meta property="og:title" content="Instalacion" />
<meta property="og:description" content="Guia de instalacion" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/instalacion/" />
<meta property="article:published_time" content="2020-12-02T12:39:37+01:00" />
<meta property="article:modified_time" content="2020-12-02T12:39:37+01:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Instalacion"/>
<meta name="twitter:description" content="Guia de instalacion"/>
<meta name="application-name" content="Documentación">
<meta name="apple-mobile-web-app-title" content="Documentación"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/posts/instalacion/" /><link rel="next" href="http://example.org/posts/guia_uso/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Instalacion",
        "inLanguage": "es",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/posts\/instalacion\/"
        },"genre": "posts","keywords": "guia, instalacion, documentacion","wordcount":  1341 ,
        "url": "http:\/\/example.org\/posts\/instalacion\/","datePublished": "2020-12-02T12:39:37+01:00","dateModified": "2020-12-02T12:39:37+01:00","publisher": {
            "@type": "Organization",
            "name": "victorav"},"author": {
                "@type": "Person",
                "name": "victorav"
            },"description": "Guia de instalacion"
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Documentación">Documentación</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Documentación">Documentación</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Cambia el tema">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contenido</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Instalacion</h1><h2 class="single-subtitle">Guia de instalacion</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://victorav.me" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>victorav</a></span>&nbsp;<span class="post-category">incluido en <a href="/categories/documentacion/"><i class="far fa-folder fa-fw"></i>documentacion</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2020-12-02">2020-12-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1341 palabras&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;7 minutos&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contenido</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#requisitos-iniciales">Requisitos iniciales</a></li>
    <li><a href="#pasos-para-realizar-la-instalación">Pasos para realizar la instalación</a>
      <ul>
        <li><a href="#1-descarga">1. Descarga</a></li>
        <li><a href="#2-mysql">2. MYSQL</a></li>
        <li><a href="#3-instalación">3. Instalación</a></li>
      </ul>
    </li>
    <li><a href="#configuración-clientes">Configuración clientes</a>
      <ul>
        <li><a href="#configuración-clientes-windows">Configuración clientes Windows</a></li>
        <li><a href="#configuración-clientes-linux">Configuración clientes Linux</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Guía de instalación paso a paso del programa</p>
<h2 id="requisitos-iniciales">Requisitos iniciales</h2>
<ul>
<li>Servidor Debian/Ubuntu en el que se realizará la instalación <em>(En este ejemplo se usará Debian GNU/Linux 10 buster)</em></li>
<li>Usuario capaz de ejecutar comandos con sudo.</li>
<li>Conexión a Internet</li>
<li>Git <em>(Si se quiere descargar el programa directamente desde los repositorios)</em></li>
</ul>
<hr>
<h2 id="pasos-para-realizar-la-instalación">Pasos para realizar la instalación</h2>
<h3 id="1-descarga">1. Descarga</h3>
<p>Lo primero que tenemos que hacer es descargar en el servidor los archivos del programa con el método que veamos más conveniente: scp, ftp, git&hellip;
Por ejemplo, si quisiesemos descargarlo con git tendríamos que ejecutar el siguiente comando:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git clone https://github.com/victoravtr/Proyecto.git
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/git_clone.png"
        data-srcset="/images/instalacion/git_clone.png, /images/instalacion/git_clone.png 1.5x, /images/instalacion/git_clone.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/git_clone.png"
        title="git clone" /></p>
<p>Además, también tenemos que descargar el repositorio que contiene la webshell:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git clone https://github.com/billchurch/webssh2.git
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">cp -r webssh2/ /var/www/
</code></pre></div><hr>
<h3 id="2-mysql">2. MYSQL</h3>
<p>Aunque el programa ofrece la opción de realizar una instalación de forma automática, la instalación de mysql debe realizarla el propio usuario.
Se haría de la siguiente manera:</p>
<ol>
<li>Primero, instalamos maria-db con apt</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install mariadb-server
</code></pre></div><ol start="2">
<li>Cuando la instalación haya completado, tenemos que configurar el servidor:</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo mysql_secure_installation
</code></pre></div><p>Este comando hará que aparezca un menú en el que tendremos que configurar:</p>
<ul>
<li>Contraseña de root: la que queramos.</li>
<li>Eliminar los usuarios anónimos: sí.</li>
<li>Desactivar el acceso remoto como root: no.</li>
<li>Eliminar bases de datos de pruebsa: sí.</li>
<li>Recargar la tabla de privilegios: sí.</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/mysql_secure_installation.png"
        data-srcset="/images/instalacion/mysql_secure_installation.png, /images/instalacion/mysql_secure_installation.png 1.5x, /images/instalacion/mysql_secure_installation.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/mysql_secure_installation.png"
        title="mysql_secure_installation" /></p>
<p>Una vez hayamos terminado la configuración, tenemos que crear el usuario y la base de datos que va a usar el usuario.
Para ello tenemos que hacer lo siguiente:</p>
<ol>
<li>Nos logeamos el mysql con el comando <em>sudo mysql -u root -p</em></li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo mysql -u root -p
</code></pre></div><ol start="2">
<li>Creamos el usuario <em>proyecto</em> con el comando <em>CREATE USER &lsquo;proyecto&rsquo;@'%&rsquo; IDENTIFIED BY &lsquo;contraseña&rsquo;;</em>;</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">CREATE USER <span class="s1">&#39;proyecto&#39;</span>@<span class="s1">&#39;%&#39;</span> IDENTIFIED BY <span class="s1">&#39;contraseña&#39;</span><span class="p">;</span>
</code></pre></div><ol start="3">
<li>Creamos la base de datos <em>proyecto_db</em> con el comando <em>CREATE DATABASE proyecto_db;</em></li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">CREATE DATABASE proyecto_db<span class="p">;</span>
</code></pre></div><ol start="4">
<li>Le damos todos los privilegios al usuario que hemos creado en la base de datos que acabamos de crear con el comando _GRANT ALL PRIVILEGES ON proyecto_db.* TO &lsquo;proyecto&rsquo;@'%';_</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">GRANT ALL PRIVILEGES ON proyecto_db.* TO <span class="s1">&#39;proyecto&#39;</span>@<span class="s1">&#39;%&#39;</span><span class="p">;</span>
</code></pre></div><ol start="5">
<li>Ejecutamos el comando <em>FLUSH PRIVILEGES;</em> para que se apliquen los cambios.</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">FLUSH PRIVILEGES<span class="p">;</span>
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/mysql_configure.png"
        data-srcset="/images/instalacion/mysql_configure.png, /images/instalacion/mysql_configure.png 1.5x, /images/instalacion/mysql_configure.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/mysql_configure.png"
        title="configuracion mysql" /></p>
<hr>
<h3 id="3-instalación">3. Instalación</h3>
<p>Tenemos 2 opciones para instalar el programa: la forma manual y la forma automática.</p>
<hr>
<h4 id="31-instalación-automáticarecomendado">3.1 Instalación automática(Recomendado)</h4>
<p>Una vez hayamos descargado el programa solo tenemos que entrar en la carpeta &ldquo;Proyecto&rdquo; y ejecutar el script install.sh como sudo.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> Proyecto
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo ./install
</code></pre></div><p>Aceptaríamos todo lo que nos va preguntando y, de esta forma, se instalará el programa de forma automática, a excepción de mysql que requiere la configuración manual previamente hecha.</p>
<hr>
<h4 id="32-instalación-manualno-recomendado">3.2 Instalación manual(No recomendado)</h4>
<p>Para realizar la instalación manual tenemos que instalar todos los componentes que necesita el programa, crear la estructura de carpetas que se va a necesitar y configurar los distintos archivos que necesita el programa:</p>
<p>Se necesita:</p>
<h5 id="ssh---opensshcomhttpswwwopensshcom">ssh - <a href="https://www.openssh.com/" target="_blank" rel="noopener noreffer">openssh.com</a></h5>
<p>Entorno de ejecución para JavaScript que gestiona el funcionamiento de la webshell.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install openssh-server
</code></pre></div><h5 id="nodejs---nodejsorghttpsnodejsorges">nodejs - <a href="https://nodejs.org/es/" target="_blank" rel="noopener noreffer">nodejs.org</a></h5>
<p>Entorno de ejecución para JavaScript que gestiona el funcionamiento de la webshell.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install nodejs
</code></pre></div><h5 id="npm---npmjscomhttpswwwnpmjscom">npm - <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreffer">npmjs.com</a></h5>
<p>Gestor de paquetes de nodejs.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install npm
</code></pre></div><h5 id="forever---githubcomforeversdhttpsgithubcomforeversdforeverreadme">forever - <a href="https://github.com/foreversd/forever#readme" target="_blank" rel="noopener noreffer">github.com/foreversd</a></h5>
<p>Libería de nodejs para gestionar la ejecución de aplicaciones.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo npm install forever -g
</code></pre></div><h5 id="sendmail---proofpointcomhttpswwwproofpointcomusproductsemail-protectionopen-source-email-solution">sendmail - <a href="https://www.proofpoint.com/us/products/email-protection/open-source-email-solution" target="_blank" rel="noopener noreffer">proofpoint.com</a></h5>
<p>Permite ejecutar y configurar de forma sencilla el envio de correos desde php.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install sendmail
</code></pre></div><h5 id="python3---pythonorghttpswwwpythonorg">python3 - <a href="https://www.python.org/" target="_blank" rel="noopener noreffer">python.org</a></h5>
<p>Necesario para ejecutar los scripts de python.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install python3
</code></pre></div><h5 id="python3-pip---pippypaiohttpspippypaioenstable">python3-pip - <a href="https://pip.pypa.io/en/stable/" target="_blank" rel="noopener noreffer">pip.pypa.io</a></h5>
<p>Sirve para instalar liberías de python de forma sencilla, pywinrm en nuestro caso.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">apt install python3-pip
</code></pre></div><h5 id="pywinrm---githubcomdiyanpywinrmhttpsgithubcomdiyanpywinrm">pywinrm - <a href="https://github.com/diyan/pywinrm" target="_blank" rel="noopener noreffer">github.com/diyan/pywinrm</a></h5>
<p>Libería que permite la ejecución de comandos entre sistemas linux y windows por medio de WinRM.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pip3 install pywinrm
</code></pre></div><h5 id="sshpass---sourceforgenetprojectssshpasshttpssourceforgenetprojectssshpass">sshpass - <a href="https://sourceforge.net/projects/sshpass/" target="_blank" rel="noopener noreffer">sourceforge.net/projects/sshpass</a></h5>
<p>Permite indicarle a ssh una contraseña por en el propio comando de conexion, en nuestro caso la usamos para establecer la conexión con otros sistemas.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">apt install sshpass
</code></pre></div><h5 id="apache2---apacheorghttpshttpdapacheorg">apache2 - <a href="https://httpd.apache.org/" target="_blank" rel="noopener noreffer">apache.org</a></h5>
<p>Es el servidor web HTTP que usará el programa.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">apt install apache2
</code></pre></div><h5 id="php---phpnethttpswwwphpnetmanualesintro-whatisphp">php - <a href="https://www.php.net/manual/es/intro-whatis.php" target="_blank" rel="noopener noreffer">php.net</a></h5>
<p>Lenguaje en el que está programado el backend del programa, su lógica.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">apt install php
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">apt install php-mysqli
</code></pre></div><h5 id="mariadb-server---mariadborghttpsmariadborg">mariadb-server - <a href="https://mariadb.org/" target="_blank" rel="noopener noreffer">mariadb.org</a></h5>
<p>El sistema de gestión de bases de datos que usaremos.</p>
<hr>
<p>Además, necesitas crear el sistema de carpetas que el programa va a utilizar y colocar en ellas los archivos requeridos:</p>
<ul>
<li>
<p>/etc/proyecto</p>
</li>
<li>
<p>/etc/proyecto/apache/</p>
<ul>
<li>Dentro del directorio se debe colocar el archivo <em>proyecto.conf</em></li>
</ul>
</li>
<li>
<p>/etc/proyecto/general</p>
<ul>
<li>Dentro del directorio se debe colocar el archivo <em>exe_switch</em></li>
</ul>
</li>
<li>
<p>/etc/proyecto/mysql/</p>
<ul>
<li>Dentro del directorio se deben colocar los archivos <em>db_config.conf</em> y <em>init_db.sql</em></li>
</ul>
</li>
<li>
<p>/etc/proyecto/zabbix/</p>
<ul>
<li>Dentro del directorio se deben colocar los archivos <em>zabbix_agentd.conf</em>, <em>zabbix_agentd32.exe</em> y <em>zabbix_agentd64.exe</em></li>
</ul>
</li>
<li>
<p>/var/www/proyecto</p>
<ul>
<li>Dentro del directorio se deben colocar todos los archivos que están en el interior de la carpeta <em>Web-Proyecto-Content</em></li>
</ul>
</li>
</ul>
<hr>
<p>Por último, debes editar una serie de archivos para asegurar el correcto funcionamiento del programa:</p>
<p>Apache:</p>
<ul>
<li>Copiar archivo <em>/etc/proyecto/apache/proyecto.conf</em> en <em>/etc/apache2/sites-available/proyecto.conf</em></li>
<li>Situarnos en el directorio <em>/etc/apache2/sites-available/</em> y ejecutar los siguientes comandos:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo a2dissite 000-default.conf
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo a2enssite proyecto.conf
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo service apache2 restart
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/apache_conf.png"
        data-srcset="/images/instalacion/apache_conf.png, /images/instalacion/apache_conf.png 1.5x, /images/instalacion/apache_conf.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/apache_conf.png"
        title="configuracion apache" /></p>
<p>Hosts:</p>
<ul>
<li>Obtenemos nuestra IP con el comando <em>hostname -I</em></li>
<li>La añadimos al archivo /etc/hosts</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">hostname -I
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s2">&#34;IP  proyecto.local&#34;</span> &gt;&gt; /etc/hosts
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/hosts.png"
        data-srcset="/images/instalacion/hosts.png, /images/instalacion/hosts.png 1.5x, /images/instalacion/hosts.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/hosts.png"
        title="/etc/hosts" /></p>
<p>PHP:</p>
<ul>
<li>Abrimos el archivo /etc/php/7.3/apache2/php.ini con el editor de texto que prefiramos y editamos las siguientes variables:</li>
<li>upload_max_filesize: aumentamos su valor a 2048M, por ejemplo.</li>
<li>post_max_size: aumentamosn su valor a 2100M, por ejemplo.</li>
<li>extension=mysqli: eliminamos la <em>&rdquo;,&quot;</em> del principio de línea
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/php.png"
        data-srcset="/images/instalacion/php.png, /images/instalacion/php.png 1.5x, /images/instalacion/php.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/php.png"
        title="php.ini" /></li>
</ul>
<p>MYSQL:</p>
<ul>
<li>Editamos el archivo /etc/proyecto/mysql/db_config.conf con el editor que prefiramos para incluir la configuración que realizamos antes en mysql
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/mysql_file.png"
        data-srcset="/images/instalacion/mysql_file.png, /images/instalacion/mysql_file.png 1.5x, /images/instalacion/mysql_file.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/mysql_file.png"
        title="mysql config" /></li>
</ul>
<p>WEBSHELL:</p>
<ul>
<li>Por último, habría que instalar la webshell y ponerla en marcha con forever</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo npm install /var/www/webssh2/app/ 
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo forever start /var/www/webssh2/app/index.js
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/forever.png"
        data-srcset="/images/instalacion/forever.png, /images/instalacion/forever.png 1.5x, /images/instalacion/forever.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/forever.png"
        title="webssh2 install" /></p>
<hr>
<p>Con todo esto, la aplicación ya estaría operativa.</p>
<hr>
<h2 id="configuración-clientes">Configuración clientes</h2>
<p>Para poder utilizar el programa es necesario que los clientes objetivos tengan habilitado una forma de comunicación.
Para operar con los clientes Linux debe de estar habilitado un servidor ssh.
Para operar con los clientes Windows se presentan 2 casos:</p>
<ul>
<li>Windows workstation: podemos elegir entre SSH y WinRM</li>
<li>Windows Server: deben de tener habilitado un servidor ssh.</li>
</ul>
<hr>
<h3 id="configuración-clientes-windows">Configuración clientes Windows</h3>
<hr>
<h4 id="configuración-ssh">Configuración ssh</h4>
<hr>
<h5 id="workstation">Workstation</h5>
<h6 id="windows-10">Windows 10</h6>
<p>Para instalar un servidor ssh en Windows 10 tenemos que ir a <em>&ldquo;Aplicaciones&rdquo;</em>, dentro del panel de configuración.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/config_windows.png"
        data-srcset="/images/instalacion/config_windows.png, /images/instalacion/config_windows.png 1.5x, /images/instalacion/config_windows.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/config_windows.png"
        title="panel de configuración" /></p>
<p>Características opcionales&hellip;</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/app_carac.png"
        data-srcset="/images/instalacion/app_carac.png, /images/instalacion/app_carac.png 1.5x, /images/instalacion/app_carac.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/app_carac.png"
        title="características opcionales" /></p>
<p>Agregar una característica&hellip;</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/add_carac.png"
        data-srcset="/images/instalacion/add_carac.png, /images/instalacion/add_carac.png 1.5x, /images/instalacion/add_carac.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/add_carac.png"
        title="agregar característica" /></p>
<p>Instalamos el servidor OpenSSH&hellip;</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/windows_10_openssh.png"
        data-srcset="/images/instalacion/windows_10_openssh.png, /images/instalacion/windows_10_openssh.png 1.5x, /images/instalacion/windows_10_openssh.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/windows_10_openssh.png"
        title="instalar OpenSSH" /></p>
<p>Ahora solo tendríamos que configurar el servicio:</p>
<ul>
<li>Abrimos una terminal de powershell como administrador y ejecutamos el siguiente comando para cambiar la shell predeterminada:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">New-ItemProperty</span> <span class="n">-Path</span> <span class="s2">&#34;HKLM:\SOFTWARE\OpenSSH&#34;</span> <span class="n">-Name</span> <span class="n">DefaultShell</span> <span class="n">-Value</span> <span class="s2">&#34;C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe&#34;</span> <span class="n">-PropertyType</span> <span class="n">String</span> <span class="n">-Force</span>
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/cambiar_shell.png"
        data-srcset="/images/instalacion/cambiar_shell.png, /images/instalacion/cambiar_shell.png 1.5x, /images/instalacion/cambiar_shell.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/cambiar_shell.png"
        title="cambiar shell" /></p>
<ul>
<li>Editamos el archivo <em>C:\ProgramData\ssh\shhd_config</em>, incluimos el nombre del usuario local con el que nos conectaremos y le indicamos el que use el puerto 22.
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/windows_ssh_config.png"
        data-srcset="/images/instalacion/windows_ssh_config.png, /images/instalacion/windows_ssh_config.png 1.5x, /images/instalacion/windows_ssh_config.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/windows_ssh_config.png"
        title="cambiar shell" /></li>
</ul>
<p>Puede que necesites configurar el firewall para permitir las conexiones por el puerto 22. Para hacerlo, debes ejecuar otro comando de powershell:</p>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="nb">New-NetFirewallRule</span> <span class="n">-Name</span> <span class="n">sshd</span> <span class="n">-DisplayName</span> <span class="s1">&#39;OpenSSH SSH Server&#39;</span> <span class="n">-Enabled</span> <span class="n">True</span> <span class="n">-Direction</span> <span class="n">Inbound</span> <span class="n">-Protocol</span> <span class="n">TCP</span> <span class="n">-Action</span> <span class="n">Allow</span> <span class="n">-LocalPort</span> <span class="n">22</span> <span class="n">-Program</span> <span class="s2">&#34;C:\System32\OpenSSH\sshd.exe&#34;</span>
</code></pre></div><h6 id="windows-87">Windows 8/7</h6>
<p>La instalación de OpenSSH en Windows 7 y Windows 8 es la misma:</p>
<ul>
<li>Descargamos el progama desde la siguiente URL y lo descomprimimos: <a href="https://github.com/PowerShell/Win32-OpenSSH/releases" target="_blank" rel="noopener noreffer">github.com/PowerShell/Win32-OpenSSH</a></li>
<li>Abrimos una terminal en carpeta que acabamos de descomprimir y ejecutamos el siguiente comando:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">powershell</span><span class="p">.</span><span class="n">exe</span> <span class="n">-ExecutionPolicy</span> <span class="n">Bypass</span> <span class="o">-File</span> <span class="nb">install-sshd</span><span class="p">.</span><span class="n">ps1</span>
</code></pre></div><ul>
<li>Por último, editamos el archivo de configuración y añadimos la regla en el firewall como hicimos con Windows 10.</li>
</ul>
<hr>
<h5 id="server">Server</h5>
<h6 id="windows-server-2019">Windows Server 2019</h6>
<p>La instalación de OpenSSH en Windows Server 2019 es la misma que haríamos en un Windows 10.</p>
<h6 id="windows-server-20162012">Windows Server 2016/2012</h6>
<p>La instalación de OpenSSH en Windows Server 2016/2012 es la misma que haríamos en un Windows 7.</p>
<h4 id="configuración-winrm">Configuración WinRM</h4>
<h5 id="workstation-1">Workstation</h5>
<h6 id="windows-1087">Windows 10/8/7</h6>
<p>La instalación y configuración de WinRM es la misma para los 3 sistemas:</p>
<ul>
<li>Abrimos una terminal de cmd como administradores.</li>
<li>Ejecutamos el siguiente comando para habilitar el servicio:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="n">quickconfig</span>
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/winrm_1.png"
        data-srcset="/images/instalacion/winrm_1.png, /images/instalacion/winrm_1.png 1.5x, /images/instalacion/winrm_1.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/winrm_1.png"
        title="configuracion winrm" /></p>
<ul>
<li>Ejecutamos los siguientes comandos para configurar el servicio:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="nb">set </span><span class="n">winrm</span><span class="p">/</span><span class="n">config</span><span class="p">/</span><span class="n">service</span><span class="p">/</span><span class="n">auth</span> <span class="p">@{</span><span class="n">Basic</span><span class="p">=</span><span class="s2">&#34;true&#34;</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="nb">set </span><span class="n">winrm</span><span class="p">/</span><span class="n">config</span><span class="p">/</span><span class="n">service</span> <span class="p">@{</span><span class="n">AllowUnencrypted</span><span class="p">=</span><span class="s2">&#34;true&#34;</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="nb">set </span><span class="n">winrm</span><span class="p">/</span><span class="n">config</span><span class="p">/</span><span class="n">client</span><span class="p">/</span><span class="n">auth</span> <span class="p">@{</span><span class="n">Basic</span><span class="p">=</span><span class="s2">&#34;true&#34;</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="nb">set </span><span class="n">winrm</span><span class="p">/</span><span class="n">config</span><span class="p">/</span><span class="n">client</span> <span class="p">@{</span><span class="n">AllowUnencrypted</span><span class="p">=</span><span class="s2">&#34;true&#34;</span><span class="p">}</span>
</code></pre></div><ul>
<li>Con los siguientes comandos podemos comprobar la configuración, debería de quedar de la siguiente manera:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="n">get</span> <span class="n">winrm</span><span class="p">/</span><span class="n">config</span><span class="p">/</span><span class="n">service</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-powershell" data-lang="powershell"><span class="n">winrm</span> <span class="n">get</span> <span class="n">winrm</span><span class="p">/</span><span class="n">config</span><span class="p">/</span><span class="n">client</span>
</code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/instalacion/winrm_config.png"
        data-srcset="/images/instalacion/winrm_config.png, /images/instalacion/winrm_config.png 1.5x, /images/instalacion/winrm_config.png 2x"
        data-sizes="auto"
        alt="/images/instalacion/winrm_config.png"
        title="Configuracion winrm" /></p>
<h3 id="configuración-clientes-linux">Configuración clientes Linux</h3>
<h4 id="configuración-ssh-1">Configuración ssh</h4>
<h5 id="debianubuntu">Debian/Ubuntu</h5>
<p>La instalación del servidor ssh es la misma en Debian que en Ubuntu:</p>
<ul>
<li>Lo instalamos con el siguiente comando:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt install openssh-server
</code></pre></div><ul>
<li>Si queremos conectarnos con el usuario root tenemos que editar el archivo <em>/etc/ssh/sshd_config</em> y cambiar la línea <em>&quot;#PermitRootLogin prohibit-password
&ldquo;</em> por <em>&ldquo;PermitRootLogin yes&rdquo;</em></li>
</ul></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Actualizado el 2020-12-02</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/guia/">guia</a>,&nbsp;<a href="/tags/instalacion/">instalacion</a>,&nbsp;<a href="/tags/documentacion/">documentacion</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Regresar</a></span>&nbsp;|&nbsp;<span><a href="/">Inicio</a></span>
        </section>
    </div>

    <div class="post-nav">
            <a href="/posts/guia_uso/" class="next" rel="next" title="How-To">How-To<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Provisto por <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> | Tema - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Volver arriba">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="Ver comentarios">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/twemoji/twemoji.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copiar al portapapeles","maxShownLines":10},"comment":{},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
